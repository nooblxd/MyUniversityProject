C51 COMPILER V7.06   CONGJI0                                                               07/08/2019 10:53:11 PAGE 1   


C51 COMPILER V7.06, COMPILATION OF MODULE CONGJI0
OBJECT MODULE PLACED IN CONGJI0.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE CONGJI0.C BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          #include <reg51.h>
   2          typedef unsigned char uchar;
   3          typedef unsigned int uint;
   4          typedef unsigned long ulong;
   5          
   6          sbit start = P2 ^ 3;
   7          sbit oe = P2 ^ 4;
   8          sbit eoc = P2 ^ 5;
   9          uchar temp = 0, rec_addr, rec_data, getdata;
  10          uchar ADDR = 0x20;
  11          void init();
  12          void capture_num();
  13          void Delay(uint m);
  14          void fs();
  15          void send(uchar c);
  16          
  17          void main()
  18          {
  19   1          init();
  20   1      
  21   1          while (1)
  22   1          {
  23   2              while (RI == 0)
  24   2                  ;
  25   2              RI = 0;
  26   2              rec_addr = SBUF;
  27   2              if (rec_addr == ADDR)
  28   2              {
  29   3                  SM2 = 0;
  30   3                  // while (RI == 0)
  31   3                  //     ;
  32   3                  // RI = 0;
  33   3                  // rec_data = SBUF;
  34   3                  // if (rec_data == 0xFF)
  35   3                  // {
  36   3                  capture_num();
  37   3                  send(temp);
  38   3                  // }
  39   3              }
  40   2          }
  41   1      }
  42          void Delay(uint m)
  43          {
  44   1          while (m--)
  45   1              ;
  46   1      }
  47          void init()
  48          {
  49   1          SCON = 0xF0;
  50   1          TMOD = 0x20;
  51   1      
  52   1          TH1 = 0xf3;
  53   1          TL1 = 0xf3;
  54   1          TR1 = 1;
  55   1      
C51 COMPILER V7.06   CONGJI0                                                               07/08/2019 10:53:11 PAGE 2   

  56   1          start = 0;
  57   1          oe = 0;
  58   1      }
  59          
  60          void capture_num()
  61          {
  62   1              start = 1;
  63   1              start = 0;
  64   1              //if (eoc == 1)
  65   1              // / {
  66   1              oe = 1;
  67   1              temp = P0;
  68   1              P1 = temp;
  69   1              // oe = 0;
  70   1              // / }
  71   1      }
  72          
  73          void send(uchar c)
  74          {
  75   1          TB8 = 0;
  76   1          SBUF = c;
  77   1          while (TI == 0)
  78   1              ;
  79   1          TI = 0;
  80   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     81    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
