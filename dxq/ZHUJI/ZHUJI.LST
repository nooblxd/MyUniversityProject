C51 COMPILER V7.06   ZHUJI                                                                 07/08/2019 10:53:03 PAGE 1   


C51 COMPILER V7.06, COMPILATION OF MODULE ZHUJI
OBJECT MODULE PLACED IN ZHUJI.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE ZHUJI.C BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          #include <reg51.h>
   2          typedef unsigned char uchar;
   3          typedef unsigned int uint;
   4          typedef unsigned long ulong;
   5          uchar table[] =
   6              {
   7                  0xFC, 0x60, 0xDA, 0xF2, 0x66, 0xB6, 0xBE, 0xE0, 0xFE, 0xF6, 0xEE, 0x3E, 0x9C, 0x7A, 0x9E, 0x8E};
   8          uchar address[] =
   9              {
  10                  0xFE, 0xFD, 0xFB, 0xF7, 0xEF, 0xDF, 0xBF, 0x7F};
  11          
  12          sbit P26 = P2 ^ 6;
  13          sbit P27 = P2 ^ 7;
  14          sbit P22 = P2 ^ 2;
  15          sbit P23 = P2 ^ 3;
  16          
  17          uchar run = 0;
  18          uchar temp = 0;
  19          uchar num_cj = 0;
  20          uchar temp_data = 0;
  21          uchar CongJi0 = 0x20, CongJi1 = 0x30;
  22          uchar CongJi = 0x20;
  23          uchar count = 0;
  24          
  25          void Delay(uint m);
  26          void Display();
  27          void init();
  28          void check_cj(uchar num_cj);
  29          void addr_send(uchar CongJi);
  30          void data_rec();
  31          void DA();
  32          
  33          void ex0_int() interrupt 0
  34          {
  35   1          run = !run;
  36   1          TR0 = !TR0;
  37   1      }
  38          
  39          void time0_int() interrupt 1
  40          {
  41   1          TH0 = 0xd8;
  42   1          TL0 = 0xf0;
  43   1          count++;
  44   1          if (count == 100)
  45   1          {
  46   2              count = 0;
  47   2              num_cj = !num_cj;
  48   2          }
  49   1      }
  50          
  51          void main()
  52          {
  53   1          init();
  54   1      
  55   1          while (1)
C51 COMPILER V7.06   ZHUJI                                                                 07/08/2019 10:53:03 PAGE 2   

  56   1          {
  57   2              if (run)
  58   2              {
  59   3                  if (num_cj == 0)
  60   3                      CongJi = CongJi0;
  61   3                  else
  62   3                      CongJi = CongJi1;
  63   3      
  64   3                  addr_send(CongJi);
  65   3                  // TB8 = 1;
  66   3                  // SBUF = CongJi;
  67   3                  // while (TI == 0)
  68   3                  //     ;
  69   3                  // TI = 0;
  70   3      
  71   3                  data_rec();
  72   3                  // while (RI == 0)
  73   3                  //     ;
  74   3                  // RI = 0;
  75   3                  // temp = SBUF;
  76   3              }
  77   2      
  78   2              Display();
  79   2              DA();
  80   2          }
  81   1      }
  82          void Delay(uchar m)
  83          {
*** WARNING C235 IN LINE 83 OF ZHUJI.C: parameter 1: different types
  84   1          unsigned char a, b;
  85   1          for (; m > 0; m--)
  86   1              for (b = 142; b > 0; b--)
  87   1                  for (a = 2; a > 0; a--)
  88   1                      ;
  89   1      }
  90          
  91          void addr_send(uchar CongJi)
  92          {
  93   1          TB8 = 1;
  94   1          SBUF = CongJi;
  95   1          while (TI == 0)
  96   1              ;
  97   1          TI = 0;
  98   1      }
  99          
 100          void data_rec()
 101          {
 102   1          while (RI == 0)
 103   1              ;
 104   1          RI = 0;
 105   1          temp = SBUF;
 106   1      }
 107          void init()
 108          {
 109   1          SCON = 0xD0;
 110   1          TMOD = 0x21;
 111   1      
 112   1          TH0 = 0xd8;
 113   1          TL0 = 0xf0;
 114   1      
 115   1          TH1 = 0xf3;
 116   1          TL1 = 0xf3;
C51 COMPILER V7.06   ZHUJI                                                                 07/08/2019 10:53:03 PAGE 3   

 117   1      
 118   1          EA = 1;
 119   1          EX0 = 1;
 120   1          ET0 = 1;
 121   1          IT0 = 1;
 122   1      
 123   1          TR0 = 0;
 124   1          TR1 = 1;
 125   1      
 126   1          P22= 0;
 127   1      
 128   1          count = 0;
 129   1          num_cj = 0;
 130   1      }
 131          void Display()
 132          {
 133   1      
 134   1          P0 = 0x7f;
 135   1          P27 = 1;
 136   1          P27 = 0;
 137   1          P0 = table[num_cj];
 138   1          P26 = 1;
 139   1          // Delay(10);
 140   1          P26 = 0;
 141   1          Delay(1);
 142   1      
 143   1          temp_data = temp % 10;
 144   1          P0 = 0xfe;
 145   1          P27 = 1;
 146   1          P27 = 0;
 147   1          P0 = table[temp_data];
 148   1          P26 = 1;
 149   1          // Delay(10);
 150   1          P26 = 0;
 151   1          Delay(1);
 152   1      
 153   1          temp_data = temp / 10 % 10;
 154   1      
 155   1          P0 = 0xfd;
 156   1          P27 = 1;
 157   1          P27 = 0;
 158   1          P0 = table[temp_data];
 159   1          P26 = 1;
 160   1          // Delay(10);
 161   1          P26 = 0;
 162   1          Delay(1);
 163   1      
 164   1          temp_data = temp / 100 % 10;
 165   1      
 166   1          P0 = 0xfb;
 167   1          P27 = 1;
 168   1          P27 = 0;
 169   1          P0 = table[temp_data];
 170   1          P26 = 1;
 171   1          // Delay(10);
 172   1          P26 = 0;
 173   1          Delay(1);
 174   1      }
 175          
 176          void DA()
 177          {
 178   1      
C51 COMPILER V7.06   ZHUJI                                                                 07/08/2019 10:53:03 PAGE 4   

 179   1          P1 = temp / 2;
 180   1          P23 = 1;
 181   1          P23 = 0;
 182   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    298    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     32    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
